<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Home â€” RapidRide</title>
  <link rel="stylesheet" href="../common/css/global.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    /* Scoped Dashboard Styles */
    .dashboard-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 2rem;
      margin-top: 2rem;
    }

    @media (max-width: 900px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
    }

    .recent-ride-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: white;
      border-radius: var(--radius-md);
      margin-bottom: 1rem;
      border: 1px solid var(--glass-border);
      transition: 0.2s;
    }

    .recent-ride-item:hover {
      border-color: var(--primary);
      transform: translateX(5px);
    }

    .map-preview {
      width: 100%;
      height: 300px;
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-top: 1rem;
      border: 1px solid var(--glass-border);
    }

    #map {
      width: 100%;
      height: 100%;
    }

    /* Section Header Alignment */
    .section-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 1.5rem;
    }

    /* Notification Badge Correction */
    .notification-btn,
    .track-ride-btn {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.2s;
    }

    .notification-btn:hover,
    .track-ride-btn:hover {
      background: rgba(0, 0, 0, 0.05);
    }
  </style>
  <script src="../common/js/config.js"></script>
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;" class="brand"
      onclick="window.location.href='rider_home.html'">
      <img src="../assets/logo.png" alt="RapidRide" style="height: 32px; display:none;"
        onerror="this.style.display='none'">
      <span>RapidRide</span>
    </div>

    <!-- Right Side Actions -->
    <div style="display: flex; align-items: center; gap: 1rem;">
      <div class="track-ride-btn" onclick="openTrackRideModal()" title="Track Active Ride" style="cursor: pointer;">
        <span style="font-size: 1.5rem;">ğŸ“</span>
      </div>
      <div class="notification-btn" onclick="openNotifications()" style="cursor: pointer; position: relative;">
        <span style="font-size: 1.5rem;">ğŸ””</span>
        <div class="notification-badge" id="notificationBadge"
          style="display: none; position: absolute; top: 0; right: 0; background: #ef4444; color: white; font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
          0</div>
      </div>
      <div class="profile-btn" onclick="window.location.href='profile.html'"
        style="cursor: pointer; width: 40px; height: 40px; background: var(--primary); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
        ğŸ‘¤
      </div>
    </div>
  </nav>

  <div class="container fade-in" style="min-height: 60vh;">

    <!-- Welcome Section -->
    <div style="margin: 3rem 0 2rem 0;">
      <h1 style="font-size: 3rem; margin-bottom: 0.5rem; line-height: 1.1;">Ready to ride?</h1>
      <p style="font-size: 1.2rem; color: var(--text-secondary);">Select a service to get started.</p>
    </div>

    <!-- CAROUSEL: Ways to Ride (Replacing Grid) -->
    <!-- Contains: Bike, Auto, Cab, Intercity, Shuttle, Pooling, Rentals, Lux -->
    <div class="carousel-container" style="margin-bottom: 4rem; padding-left: 2px;">

      <!-- Bike -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸï¸</div>
        <h3>Bike</h3>
        <p>Fastest</p>
      </div>

      <!-- Auto -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸ›º</div>
        <h3>Auto</h3>
        <p>Affordable</p>
      </div>

      <!-- Cab -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸš•</div>
        <h3>Cab</h3>
        <p>Comfort</p>
      </div>

      <!-- Intercity -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸ™ï¸</div>
        <h3>Intercity</h3>
        <p>Outstation</p>
      </div>

      <!-- Shuttle -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸš</div>
        <h3>Shuttle</h3>
        <p>Fixed Route</p>
      </div>

      <!-- Pooling -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">ğŸ‘¥</div>
        <h3>Pooling</h3>
        <p>Shared</p>
      </div>

      <!-- Rental -->
      <div class="carousel-card" onclick="window.location.href='book_ride.html'">
        <div class="carousel-icon">â³</div>
        <h3>Rentals</h3>
        <p>Hourly</p>
      </div>

    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- Main Panel: Map -->
      <div class="glass-card slide-up"
        style="animation-delay: 0.1s; padding: 0; overflow: hidden; border: 1px solid var(--glass-border);">
        <div
          style="padding: 1.5rem; border-bottom: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0;">Around You</h3>
          <span style="font-size: 0.9rem; color: var(--text-muted);">Live View</span>
        </div>
        <div style="width: 100%; height: 350px;">
          <div id="map"></div>
        </div>
        <div style="padding: 1.5rem; text-align: center;">
          <button class="btn btn-primary" style="width: 100%;" onclick="window.location.href='book_ride.html'">
            Book Now
          </button>
        </div>
      </div>

      <!-- Side Panel: Recent / Saved -->
      <div class="glass-card slide-up" style="animation-delay: 0.2s;">
        <div class="section-header-row">
          <h3 style="margin:0;">Recent</h3>
          <a href="#" style="font-size: 0.9rem; font-weight: 600; color: var(--secondary);">View All</a>
        </div>

        <div id="recentRidesList">
          <div class="text-center" style="padding: 1rem; color: var(--text-muted); opacity: 0.7;">
            No recent rides.
          </div>
        </div>

        <div style="margin-top: 2rem;">
          <h4 style="margin-bottom: 1rem; color: var(--text-secondary);">Saved Places</h4>
          <div class="recent-ride-item">
            <span style="font-size: 1.5rem;">ğŸ </span>
            <div>
              <div style="font-weight: 700;">Home</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Add address</div>
            </div>
          </div>
          <div class="recent-ride-item">
            <span style="font-size: 1.5rem;">ğŸ¢</span>
            <div>
              <div style="font-weight: 700;">Work</div>
              <div style="font-size: 0.85rem; color: var(--text-muted);">Add address</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand" style="text-align: left;">
          <h3>RapidRide</h3>
          <p>Simplifying urban mobility<br>for everyone.</p>
        </div>
        <div style="text-align: left;">
          <h4>Company</h4>
          <ul>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Careers</a></li>
          </ul>
        </div>
        <div style="text-align: left;">
          <h4>Services</h4>
          <ul>
            <li><a href="#">Ride</a></li>
            <li><a href="#">Drive</a></li>
          </ul>
        </div>
        <div style="text-align: left;">
          <h4>Support</h4>
          <ul>
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Safety</a></li>
          </ul>
        </div>
      </div>
      <div class="text-center"
        style="margin-top: 3rem; padding-top: 3rem; border-top: 1px solid #eee; color: var(--text-muted); font-size: 0.9rem;">
        &copy; 2025 RapidRide. All rights reserved.
      </div>
    </div>
  </footer>

  <!-- Modals -->
  <div class="notification-modal" id="notificationModal">
    <div class="notification-modal-content glass-card">
      <div class="notification-header">
        <h3>Notifications</h3>
        <div class="notification-close" onclick="closeNotifications()">âœ•</div>
      </div>
      <div class="notification-list" id="notificationList">
        <div class="notification-empty">
          <div class="notification-empty-icon">ğŸ””</div>
          <p>No notifications yet</p>
        </div>
      </div>
    </div>
  </div>

  <div class="track-ride-modal" id="trackRideModal">
    <div class="track-ride-modal-content glass-card">
      <div class="track-ride-header">
        <h3>Current Ride</h3>
        <div class="track-ride-close" onclick="closeTrackRideModal()">âœ•</div>
      </div>
      <div class="track-ride-body" id="trackRideBody">
        <!-- Dynamic Content -->
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script src="../common/js/rider.js"></script>
  <script>
    const map = L.map('map', { zoomControl: false }).setView([17.3850, 78.4867], 13);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap &copy; CARTO'
    }).addTo(map);

    const carIcon = L.divIcon({
      html: '<div style="font-size: 24px;">ğŸš–</div>',
      className: 'dummy-car',
      iconSize: [30, 30]
    });
    L.marker([17.3950, 78.4967], { icon: carIcon }).addTo(map);
    L.marker([17.3750, 78.4767], { icon: carIcon }).addTo(map);
  </script>
</body>

</html>
